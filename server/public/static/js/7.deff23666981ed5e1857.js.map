{"version":3,"sources":["webpack:///src/views/notice/notice.vue","webpack:///./src/views/notice/notice.vue?4c43","webpack:///./src/views/notice/notice.vue"],"names":["notice","mixins","common","listArr","computed","extends_default","Object","vuex_esm","data","methods","getList","_this","this","d","id","userInfo","assign_default","searchList","friends","getAddFriendsList","then","afterGetList","setAllMsgRead","i","length","console","log","status","catch","err","onSubmit","item","agree","refuseFriends","statusMsg","aTel","tel","_this2","getFriendsAllMsgRead","setNewFriendsMsgLen","watch","updateHyStatus","$refs","container","scrollTop","init","created","notice_notice","render","_vm","_h","$createElement","_c","_self","ref","staticClass","staticStyle","width","attrs","color","slot","icon","on","click","$router","goBack","_v","to","value","refreshing","searchLoad","loading","refresh","load","z-depth","_l","index","key","$event","openWin","name","query","avatar","button","ripple","src","sysPath","headImg","alt","_e","_s","nickName","bTel","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.deff23666981ed5e1857.js","sourcesContent":["<template>\r\n  <div class=\"container_c\" ref=\"container\">\r\n    <mu-appbar style=\"width: 100%;\" color=\"primary\">\r\n      <mu-button icon slot=\"left\" @click=\"$router.goBack\">\r\n        <i class=\"iconfont icon-back\"></i>\r\n      </mu-button>\r\n      新的朋友\r\n      <mu-button icon slot=\"right\" to=\"/addFriends\">\r\n        <mu-icon value=\"search\"></mu-icon>\r\n      </mu-button>\r\n    </mu-appbar>\r\n\r\n    <div class=\"pad_box_wr\">\r\n      <mu-load-more @refresh=\"refresh\" :refreshing=\"searchLoad.refreshing\" :loading=\"searchLoad.loading\" @load=\"load\">\r\n        <mu-paper :z-depth=\"1\" class=\"demo-list-wrap\">\r\n\r\n          <mu-list v-for=\"(item,index) in listArr\" :key=\"index\" @click=\"openWin({name:'friendsInfo',query:{tel:item.tel}})\">\r\n            <mu-list-item avatar button :ripple=\"false\">\r\n              <mu-list-item-action>\r\n                <mu-avatar>\r\n                  <img :src=\"userInfo.sysPath+item.headImg\" alt=\"\" v-if=\"item.headImg\">\r\n                </mu-avatar>\r\n              </mu-list-item-action>\r\n              <mu-list-item-title>{{item.nickName}}</mu-list-item-title>\r\n              <mu-list-item-action>\r\n                <div class=\"btns\" v-if=\"item.status==2 && item.bTel==userInfo.tel\">\r\n                  <mu-button @click.stop=\"onSubmit(item)\" color=\"primary\">接受</mu-button>\r\n                  <mu-button @click.stop=\"refuseFriends(item)\" color=\"error\">拒绝</mu-button>\r\n                </div>\r\n                <div v-else>\r\n                  <mu-chip class=\"demo-chip\" @click.stop=\"()=>{}\">\r\n                    {{statusMsg(item)}}\r\n                  </mu-chip>\r\n                </div>\r\n              </mu-list-item-action>\r\n            </mu-list-item>\r\n            <mu-divider v-if=\"index!=listArr.length-1\"></mu-divider>\r\n          </mu-list>\r\n          <p class=\"tips\" v-if=\"listArr.length==0\">暂无记录</p>\r\n        </mu-paper>\r\n      </mu-load-more>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport friendsApi from \"@/api/friends\";\r\nimport { mapState, mapGetters, mapMutations } from \"vuex\";\r\nimport common from \"@/mixins/common\";\r\nimport listArr from \"@/mixins/listArr\";\r\nexport default {\r\n  mixins: [common, listArr],\r\n  computed: {\r\n    ...mapGetters([\"userInfo\", \"socket\"]),\r\n    ...mapState([\"updateHyStatus\"])\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"setNewFriendsMsgLen\"]),\r\n    //   查询好友申请列表\r\n    getList() {\r\n      let d = { id: this.userInfo.id };\r\n      Object.assign(d, this.searchList);\r\n      friendsApi\r\n        .getAddFriendsList(d)\r\n        .then(data => {\r\n          this.afterGetList(data);\r\n          // 所有消息已读\r\n          this.setAllMsgRead();\r\n          for (let i = 0; i < this.listArr.length; i++) {\r\n            console.log(this.listArr[i].status);\r\n          }\r\n        })\r\n        .catch(err => {});\r\n    },\r\n    // 同意好友的添加\r\n    onSubmit(item) {\r\n      friendsApi.agree(item).then(data => {\r\n        item.status = 1;\r\n      });\r\n    },\r\n    // 拒绝添加\r\n    refuseFriends(item) {\r\n      friendsApi.refuseFriends(item).then(data => {\r\n        item.status = 3;\r\n      });\r\n    },\r\n    // 过滤器\r\n    statusMsg(item) {\r\n      if (item.status == 0) {\r\n        return \"已解除好友关系\";\r\n      } else if (item.status == 1) {\r\n        return \"已添加\";\r\n      } else if (item.status == 2) {\r\n        return \"等待验证\";\r\n      } else if (item.status == 3) {\r\n        if (item.aTel == this.userInfo.tel) {\r\n          return \"被拒绝\";\r\n        } else {\r\n          return \"已拒绝\";\r\n        }\r\n        console.log(d);\r\n      } else if (item.status == 4) {\r\n        return \"黑名单\";\r\n      }\r\n    },\r\n    // 设置所有消息为已读\r\n    setAllMsgRead() {\r\n      friendsApi.getFriendsAllMsgRead().then(data => {\r\n        this.setNewFriendsMsgLen(0);\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    updateHyStatus() {\r\n      this.$refs.container.scrollTop = 0; //必须设置父组件的ref\r\n      this.init();\r\n    }\r\n  },\r\n  created() {}\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.btns {\r\n  display: flex;\r\n\r\n  button {\r\n    min-width: 60px;\r\n    margin-left: 0.133333rem /* 10/75 */;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/notice/notice.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"container_c\"},[_c('mu-appbar',{staticStyle:{\"width\":\"100%\"},attrs:{\"color\":\"primary\"}},[_c('mu-button',{attrs:{\"slot\":\"left\",\"icon\":\"\"},on:{\"click\":_vm.$router.goBack},slot:\"left\"},[_c('i',{staticClass:\"iconfont icon-back\"})]),_vm._v(\"\\n    新的朋友\\n    \"),_c('mu-button',{attrs:{\"slot\":\"right\",\"icon\":\"\",\"to\":\"/addFriends\"},slot:\"right\"},[_c('mu-icon',{attrs:{\"value\":\"search\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"pad_box_wr\"},[_c('mu-load-more',{attrs:{\"refreshing\":_vm.searchLoad.refreshing,\"loading\":_vm.searchLoad.loading},on:{\"refresh\":_vm.refresh,\"load\":_vm.load}},[_c('mu-paper',{staticClass:\"demo-list-wrap\",attrs:{\"z-depth\":1}},[_vm._l((_vm.listArr),function(item,index){return _c('mu-list',{key:index,on:{\"click\":function($event){return _vm.openWin({name:'friendsInfo',query:{tel:item.tel}})}}},[_c('mu-list-item',{attrs:{\"avatar\":\"\",\"button\":\"\",\"ripple\":false}},[_c('mu-list-item-action',[_c('mu-avatar',[(item.headImg)?_c('img',{attrs:{\"src\":_vm.userInfo.sysPath+item.headImg,\"alt\":\"\"}}):_vm._e()])],1),_vm._v(\" \"),_c('mu-list-item-title',[_vm._v(_vm._s(item.nickName))]),_vm._v(\" \"),_c('mu-list-item-action',[(item.status==2 && item.bTel==_vm.userInfo.tel)?_c('div',{staticClass:\"btns\"},[_c('mu-button',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onSubmit(item)}}},[_vm._v(\"接受\")]),_vm._v(\" \"),_c('mu-button',{attrs:{\"color\":\"error\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.refuseFriends(item)}}},[_vm._v(\"拒绝\")])],1):_c('div',[_c('mu-chip',{staticClass:\"demo-chip\",on:{\"click\":function($event){$event.stopPropagation();return (function (){})($event)}}},[_vm._v(\"\\n                  \"+_vm._s(_vm.statusMsg(item))+\"\\n                \")])],1)])],1),_vm._v(\" \"),(index!=_vm.listArr.length-1)?_c('mu-divider'):_vm._e()],1)}),_vm._v(\" \"),(_vm.listArr.length==0)?_c('p',{staticClass:\"tips\"},[_vm._v(\"暂无记录\")]):_vm._e()],2)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-dc1c4a36\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/notice/notice.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dc1c4a36\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./notice.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./notice.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./notice.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dc1c4a36\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./notice.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-dc1c4a36\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/notice/notice.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}